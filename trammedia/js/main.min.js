document.querySelector(".preloader")&&window.addEventListener("load",(e=>{setTimeout((()=>{enableScroll(),document.body.classList.add("loaded")}),100)}));const header=document.querySelector(".header"),mobMenu=document.querySelector(".header__bottom"),iconMenu=document.querySelector(".icon-menu"),modal=document.querySelectorAll(".modal");let animSpd=400,bp={largeDesktop:1450.98,desktop:1250.98,laptop:1000.98,tablet:767.98,phone:575.98};function sprite(e){return'<svg><use xlink:href="img/svg/sprite.svg#'+e+'"></use></svg>'}function scrollPos(){return window.pageYOffset||document.documentElement.scrollTop}function checkIOS(){let e=navigator.platform,t=navigator.userAgent;return/(iPhone|iPod|iPad)/i.test(e)||"MacIntel"===e&&navigator.maxTouchPoints>1&&!window.MSStream||/iPad|iPhone|iPod/.test(t)&&!window.MSStream}let isIOS=checkIOS(),firstLoad=!0;function enableScroll(){if(!document.querySelector(".modal.open")&&(document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll"),isIOS&&!firstLoad)){document.body.style.position="",document.body.style.top="",document.body.style.width="";let e=document.body.dataset.scrollY;window.scrollTo(0,parseInt(e||"0"))}}function disableScroll(){if(!document.querySelector(".modal.open")){let e=window.innerWidth>350?window.innerWidth-document.documentElement.clientWidth+"px":0;if(document.querySelector(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.body.classList.add("no-scroll"),isIOS&&!firstLoad){let e=window.scrollY;document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${e}px`,document.body.dataset.scrollY=e}}}function smoothDrop(e,t,o=!1){let s=o||500;if(t.style.overflow="hidden",t.style.transition=`height ${s}ms ease`,t.style["-webkit-transition"]=`height ${s}ms ease`,e.classList.contains("active")){e.parentNode.classList.remove("active"),e.parentNode.setAttribute("aria-expanded",!1);let o=t.clientHeight+"px";t.style.height=o,t.setAttribute("aria-hidden",!0),setTimeout((function(){t.style.height="0",setTimeout((()=>{t.style.display="none",t.style.height=null,e.classList.remove("active")}),s)}),0)}else{e.parentNode.classList.add("active"),e.parentNode.setAttribute("aria-expanded",!0),t.style.display="block";let o=t.clientHeight+"px";t.style.height="0px",t.setAttribute("aria-hidden",!1),setTimeout((function(){t.style.height=o,setTimeout((()=>{t.style.height=null,e.classList.add("active")}),s)}),0)}}function tabSwitch(e,t){e.forEach(((o,s)=>{o.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("active"),e.setAttribute("aria-selected",!1)})),o.classList.add("active"),o.setAttribute("aria-selected",!0),t.forEach((e=>{e.dataset.block===o.dataset.tab?e.classList.contains("active")||(e.classList.add("active"),e.style.opacity="0",setTimeout((()=>{e.style.opacity="1"}),0)):e.classList.remove("active")}))}))}))}const tabsScroll=document.querySelectorAll(".tabs-scroll");function tabsBtnVisibility(e){e.querySelector(".tabs").scrollWidth-e.querySelector(".tabs").clientWidth-e.querySelector(".tabs").scrollLeft>5?e.classList.add("show-btn"):e.classList.remove("show-btn")}tabsScroll.length&&tabsScroll.forEach((e=>{tabsBtnVisibility(e),e.querySelector(".tabs").addEventListener("scroll",(()=>tabsBtnVisibility(e))),window.addEventListener("resize",tabsBtnVisibility(e)),e.querySelector(".tabs-scroll__btn")&&e.querySelector(".tabs-scroll__btn").addEventListener("click",(t=>{let o=Array.from(e.querySelectorAll("[data-tab]")).findIndex((e=>e.classList.contains("active")));o<e.querySelectorAll("[data-tab]").length-1&&e.querySelectorAll("[data-tab]")[o+1].click()}))}));const customScroll=document.querySelectorAll(".custom-scroll");let isFirefox="undefined"!=typeof InstallTrigger;isFirefox&&(document.documentElement.style.scrollbarColor="#8a2a2b #f1f2f2"),isFirefox&&customScroll&&customScroll.forEach((e=>{e.style.scrollbarColor="#8a2a2b #f1f2f2"}));const anchorLinks=document.querySelectorAll(".js-anchor");anchorLinks.length&&anchorLinks.forEach((e=>{e.addEventListener("click",(t=>{let o=e.getAttribute("href").indexOf("#");const s=e.getAttribute("href").substring(o);let n=document.querySelector(s);if(n){t.preventDefault();let e=n.getBoundingClientRect().top<0?n.getBoundingClientRect().top-header.clientHeight-10:n.getBoundingClientRect().top-10;iconMenu.classList.contains("active")?(iconMenu.click(),setTimeout((()=>{window.scrollTo({top:scrollPos()+e,behavior:"smooth"})}),300)):window.scrollTo({top:scrollPos()+e,behavior:"smooth"})}}))}));let lastScroll=scrollPos();window.addEventListener("scroll",(()=>{scrollPos()>1?(header.classList.add("scroll"),header.classList.contains("header--main")&&header.classList.remove("header--light"),scrollPos()>lastScroll&&scrollPos()>150&&!header.classList.contains("unshow")?header.classList.add("unshow"):scrollPos()<lastScroll&&header.classList.contains("unshow")&&header.classList.remove("unshow")):(header.classList.remove("scroll"),header.classList.remove("unshow"),header.classList.contains("header--main")&&header.classList.add("header--light")),lastScroll=scrollPos()}));const switchBlock=document.querySelectorAll(".switch-block");function openModal(e){let t=document.querySelector(".modal.open");disableScroll(),t&&t.classList.remove("open"),e.classList.add("open")}function closeModal(e){e.classList.remove("open"),setTimeout((()=>{enableScroll()}),animSpd)}function modalShowBtns(){const e=document.querySelectorAll(".mod-open-btn");e.length&&e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=e.getAttribute("data-modal");openModal(document.getElementById(o))}))}))}function modalUnshowBtns(){const e=document.querySelectorAll(".mod-close-btn");e.length&&e.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=e.getAttribute("data-modal");closeModal(document.getElementById(o))}))}))}switchBlock&&switchBlock.forEach((e=>{tabSwitch(e.querySelectorAll("[data-tab]"),e.querySelectorAll("[data-block]"))})),modal&&modal.forEach((e=>{e.addEventListener("click",(t=>{e.querySelector(".modal__content").contains(t.target)||closeModal(e)})),e.querySelectorAll(".modal__close").forEach((t=>{t.addEventListener("click",(()=>{closeModal(e)}))}))})),modalShowBtns(),modalUnshowBtns();const accordion=document.querySelectorAll(".accordion");accordion.length&&accordion.forEach((e=>{e.querySelector(".accordion__header").addEventListener("click",(()=>{e.classList.contains("no-close")||e.parentNode.parentNode.querySelectorAll(".accordion").forEach((t=>{if(t.querySelector(".accordion__header").classList.contains("active")&&(smoothDrop(t.querySelector(".accordion__header"),t.querySelector(".accordion__body")),t.getBoundingClientRect().top<0)){let o=scrollPos()+e.getBoundingClientRect().top-t.querySelector(".accordion__body").clientHeight-header.clientHeight-10;window.scrollTo(0,o)}})),smoothDrop(e.querySelector(".accordion__header"),e.querySelector(".accordion__body"))}))})),iconMenu&&mobMenu&&(iconMenu.addEventListener("click",(()=>{iconMenu.classList.contains("active")?(iconMenu.setAttribute("aria-expanded",!1),iconMenu.setAttribute("aria-label","Открыть меню"),iconMenu.classList.remove("active"),mobMenu.classList.remove("open"),enableScroll()):(iconMenu.setAttribute("aria-expanded",!0),iconMenu.setAttribute("aria-label","Закрыть меню"),iconMenu.classList.add("active"),mobMenu.classList.add("open"),disableScroll())})),window.addEventListener("resize",(()=>{window.innerWidth>bp.laptop&&iconMenu.classList.contains("active")&&iconMenu.click()})));const swiper3=document.querySelectorAll(".swiper3");swiper3.length&&swiper3.forEach((e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:2,spaceBetween:10,observer:!0,observeParents:!0,watchSlidesProgress:!0,pagination:{el:e.querySelector(".swiper-pagination"),type:"bullets",clickable:!0},navigation:{prevEl:e.querySelector(".nav-btn--prev"),nextEl:e.querySelector(".nav-btn--next")},scrollbar:{el:e.querySelector(".swiper-scrollbar"),draggable:!0},breakpoints:{575.98:{slidesPerView:3}},autoplay:{delay:3500,pauseOnMouseEnter:!0,disableOnInteraction:!1},speed:800})}));const swiper1=document.querySelectorAll(".swiper1");swiper1.length&&swiper1.forEach((e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:1,observer:!0,observeParents:!0,watchSlidesProgress:!0,effect:"fade",fadeEffect:{crossFade:!0},navigation:{prevEl:e.querySelector(".nav-btn--prev"),nextEl:e.querySelector(".nav-btn--next")},speed:500})}));const authorsSticky=document.querySelector(".authors__sticky");let authorsMainSwiper;if(document.querySelector(".authors__swiper")){const e=new Swiper(".authors__thumbswiper",{slidesPerView:"auto",spaceBetween:9,direction:"horizontal",observer:!0,observeParents:!0,watchSlidesProgress:!0,speed:800,scrollbar:{el:document.querySelector(".authors .swiper-scrollbar"),draggable:!0},breakpoints:{767.98:{direction:"vertical"}}});authorsMainSwiper=new Swiper(".authors__mainswiper",{slidesPerView:1,observer:!0,observeParents:!0,watchSlidesProgress:!0,effect:"fade",fadeEffect:{crossFade:!0},thumbs:{swiper:e},speed:500})}const instItem=document.querySelectorAll(".item-inst");if(instItem.length){function enter(e){if(window.innerWidth>bp.tablet&&!e.classList.contains("show")){e.classList.add("show");let t=e.getBoundingClientRect().bottom-window.innerHeight;t>50&&window.scrollTo({top:window.scrollY+t,left:0,behavior:"smooth"})}}function leave(e){e.classList.remove("show")}instItem.forEach((e=>{const t=e.querySelector(".item-inst__content");e.addEventListener("mouseenter",(()=>enter(t))),e.addEventListener("mouseleave",(()=>leave(t))),e.addEventListener("click",(t=>{window.innerWidth<bp.tablet&&(document.querySelector("#inst-modal .inst-modal__inner").innerHTML=e.innerHTML,openModal(document.querySelector("#inst-modal")))}))}))}function animate(){document.querySelectorAll("[data-animation]").forEach((async e=>{const t=e.getBoundingClientRect().top,o=Math.abs(window.innerHeight-.1*e.offsetHeight);if(t-(o>100?o:100)<0){const t=e.getAttribute("data-animation");e.classList.add(t),e.removeAttribute("data-animation")}}))}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".wrap"),t=window.innerWidth/100;let o=window.innerWidth>bp.tablet?1e3:0;setTimeout((()=>{e.style.transform=window.innerWidth>bp.tablet?`translate3d(0, ${1*t}px, 0) scale(0.4) rotateZ(720deg)`:"translate3d(0, 0, 0)",setTimeout((()=>{e.style.transform="translate3d(0, 0px, 0) scale(1) rotateZ(0deg)",setTimeout((()=>{if(e.classList.remove("animate"),e.style.transform="none",enableScroll(),ScrollTrigger.refresh(!0),animate(),window.addEventListener("scroll",animate),authorsSticky&&authorsMainSwiper){let e=document.querySelectorAll(".authors__mainswiper .swiper-slide").length,t={value:0};gsap.to(t,{value:e-1,scrollTrigger:{trigger:".authors__sticky",start:"center center",end:"+="+300*e,pin:!0,scrub:!0,invalidateOnRefresh:!0,onUpdate:e=>{authorsMainSwiper.slideTo(Math.round(t.value))}}})}}),o)}),1e3)}),1e3)})),window.addEventListener("resize",(()=>{gsap.delayedCall(1e3,(()=>ScrollTrigger.refresh(!0)))}));